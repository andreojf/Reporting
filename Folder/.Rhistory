pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum()
ggplotly(p, tooltip="text")
p <- final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
N = n(),
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:6) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
#theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum()
ggplotly(p, tooltip="text")
final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
N = n(),
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:6) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs)
final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
N = n(),
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:6) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE)
p <- final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
N = n(),
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:6) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE)
ggplotly(p, tooltip="text")
ggplotly(p)
final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
N = n(),
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:6) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum()
#theme(legend.position="none")
p <- final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:6) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum()
final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:6) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum()
final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
)
p <- final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:5) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum()
ggplotly(p, tooltip="text")
p <- final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:5) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
#color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum()
ggplotly(p, tooltip="text")
p <- final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:5) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum()
#theme(legend.position="none")
p
ggplotly(p, tooltip="text")
p <- final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:5) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
#aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum()
#theme(legend.position="none")
p
ggplotly(p, tooltip="text")
p <- final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:5) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum()
#theme(legend.position="none")
p
ggplotly(p, tooltip="text")
p <- final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:5) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum() +
theme(legend.position="none")
ggplotly(p, tooltip="text")
final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:5) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum() +
theme(legend.position="none")
p <- final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:5) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum()
ggplotly(p, tooltip="text")
p <- final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:5) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum()
final.df %>%
filter(Pays == "Benin") %>%
group_by(NOTATION, DATE_COMPTA) %>%
summarise(
TRESO = abs(sum(TRESORERIE)) / 1e6,
SIGNAT = abs(sum(SIGNATURE)) / 1e6,
TOTAL = abs(TRESO + SIGNAT)
) %>%
gather(key = "Indicateurs", value = "Montant", 3:5) %>%
ggplot(aes(x=as.character(DATE_COMPTA), y=Montant)) +
geom_line(aes(color = NOTATION), size = 0.75) +
xlab("(03) derniers arrêtés") +
ylab("Montant en Millions") +
geom_point(
aes(fill = NOTATION),
size = 3,
pch = 21, # Type of point that allows us to have both color (border) and fill.
color = "white",
stroke = 1 # The width of the border, i.e. stroke.
) +
facet_wrap(~Indicateurs) +
scale_fill_viridis(discrete = TRUE) +
theme(legend.position="none") +
ggtitle("Evolution des indicateurs par type de notation sur les 3 derniers mois") +
theme_ipsum()
final.df %>%
notationParPays(pays="Benin") %>%
NotationFormatTable
pfEvol <- function(df, pays){
dates_compta <- unique(df$DATE_COMPTA)
dates_compta <- dates_compta[!is.na(dates_compta)]
dates_compta <- sort(dates_compta, decreasing = TRUE)
dates_compta_top3 <- dates_compta[1:3]
dates_compta_top3 <- dates_compta_top3[!is.na(dates_compta_top3)] # dans le cas où il y a moins de 3 arretés.
dates_compta_top3
out <- data.frame(Intitule=c(
"Encours des effets",
"Credits Court terme",
"Credit Moyen et Long terme",
"Compte débiteurs",
"Impayes",
"Restructures",
"Credits Particuliers",
"Credits Entreprises"
))
for (date_compta in dates_compta_top3){
out <- df %>%
filter(Pays == pays, DATE_COMPTA==date_compta) %>%
SituationDuPortefeuille %>%
.$porte_f %>%
rename(c("Montant"=as.character(format(date_compta)))) %>%
left_join(out)
}
names(out) <- NULL
names(out) <- c("Intitule", format(dates_compta_top3))
out$evol1 = (out[,4] - out[,3]) / out[,3]
out$evol2 = (out[,4] - out[,2]) / out[,2]
#out <- formatTable(out)
return(out)
}
final.df %>%
pfEvol("Benin") %>%
pfFormatTable(country = country, params = params)
View(cnd)
View(cnd)
##### QUALITE DU PORTEFEUILLE
library(data.table)
library(tidyverse)
library(dplyr)
library(knitr)
library(gt)
source("CodesCredit/preparation.R")
View(last_error_env)
##### QUALITE DU PORTEFEUILLE
library(data.table)
library(tidyverse)
library(dplyr)
library(knitr)
library(gt)
source("CodesCredit/preparation.R")
